!function(){"use strict";angular.module("formioAppTodo",["ngSanitize","ui.router","ui.bootstrap","formio","ngMap"])}(),function(){"use strict";angular.module("formioAppTodo").run(["$rootScope","AppConfig","Formio","$state",function(t,e,o,r){t.userLoginForm=e.appUrl+"/user/login",t.userRegisterForm=e.appUrl+"/user/register",t.todoForm=e.appUrl+"/todo",t.user||o.currentUser().then(function(e){t.user=e}),t.$on("$stateChangeStart",function(e,n){t.authenticated=!!o.getToken(),"auth"!==n.name.substr(0,4)&&(t.authenticated||(e.preventDefault(),r.go("auth.login")))});var n=function(){r.go("home")},s=function(){r.go("auth.login")};t.$on("formio.sessionExpired",s),t.$on("formio.unauthorized",n),t.logout=function(){o.logout().then(function(){r.go("auth.login")})["catch"](s)},t.isActive=function(t){return-1!==r.current.name.indexOf(t)}}])}(),function(){"use strict";function t(t,e,o,r,n){r.setBaseUrl(n.apiUrl),t.state("home",{url:"/",templateUrl:"views/main.html",controller:["$scope","$state","$rootScope",function(t,e,o){t.todos=[],t.todosUrl=o.todoForm+"/submission",t.getStatus=function(t){switch(t.data.status){case"notstarted":return"danger";case"started":return"info";case"done":return"success"}return""}}]}).state("auth",{"abstract":!0,url:"/auth",templateUrl:"views/user/auth.html"}).state("auth.login",{url:"/login",parent:"auth",templateUrl:"views/user/login.html",controller:["$scope","$state","$rootScope",function(t,e,o){t.$on("formSubmission",function(t,r){r&&(o.user=r,e.go("home"))})}]}).state("auth.register",{url:"/register",parent:"auth",templateUrl:"views/user/register.html",controller:["$scope","$state","$rootScope",function(t,e,o){t.$on("formSubmission",function(t,r){r&&(o.user=r,e.go("home"))})}]}),o.register("todo",function(){return{data:{status:"notstarted"}}}),e.otherwise("/")}angular.module("formioAppTodo").provider("Resource",["$stateProvider",function(t){var e={};return{register:function(o,r){e[o]=o;var n=o+"Form";t.state(o+"Index",{url:"/"+o,templateUrl:"views/resource/index.html",controller:["$scope","$state",function(t,e){t.resourceName=o,t.resourceForm=t[n],t.$on("submissionView",function(t,r){e.go(o+".view",{id:r._id})}),t.$on("submissionEdit",function(t,r){e.go(o+".edit",{id:r._id})}),t.$on("submissionDelete",function(t,r){e.go(o+".delete",{id:r._id})})}]}).state(o+"Create",{url:"/create/"+o,templateUrl:"views/resource/create.html",controller:["$scope","$state",function(t,e){t.resource=r?r():{},t.resourceForm=t[n],t.$on("formSubmission",function(t,r){e.go(o+".view",{id:r._id})})}]}).state(o,{"abstract":!0,url:"/"+o+"/:id",templateUrl:"views/resource/resource.html",controller:["$scope","$stateParams",function(t,e){t.resourceName=o,t.resourceForm=t[n],t.resourceUrl=t.resourceForm+"/submission/"+e.id}]}).state(o+".view",{url:"/",parent:o,templateUrl:"views/"+o+"/view.html",controller:["$scope","$stateParams","Formio",function(t,e,o){t.resource=r?r():{},t.position={lat:"40.74",lng:"-74.18"},new o(t.resourceUrl).loadSubmission().then(function(e){e.data.address&&(t.position.lat=e.data.address.geometry.location.lat,t.position.lng=e.data.address.geometry.location.lng),t.resource=e})}]}).state(o+".edit",{url:"/edit",parent:o,templateUrl:"views/resource/edit.html",controller:["$scope","$state",function(t,e){t.$on("formSubmission",function(){e.go("home")})}]}).state(o+".delete",{url:"/delete",parent:o,templateUrl:"views/resource/delete.html",controller:["$scope","$state",function(t,e){t.$on("delete",function(){e.go("home")})}]})},$get:function(){return e}}}]).config(t),t.$inject=["$stateProvider","$urlRouterProvider","ResourceProvider","FormioProvider","AppConfig"]}(),function(){"use strict";angular.module("formioAppTodo").constant("malarkey",malarkey).constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function t(t,e){t.debugEnabled(!0),e.options.timeOut=3e3,e.options.positionClass="toast-top-right",e.options.preventDuplicates=!0,e.options.progressBar=!0}angular.module("formioAppTodo").config(t),t.$inject=["$logProvider","toastr"]}();